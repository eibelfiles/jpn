!function(){function e(e,t){return(t||document).querySelector(e)}function t(t,n){let o=e(".song-cover",t),a=e(".song-title",t),i=e(".song-artist",t),s=e(".song-album",t);o&&(o.src=n.art),a&&(a.innerText=n.title),i&&(i.innerText=n.artist),s&&(s.innerText=n.album)}function n(e){e<10?s.innerHTML='<i class="fa-solid fa-volume-off"></i>':e<60&&e>10?s.innerHTML='<i class="fa-solid fa-volume-low"></i>':e>60&&(s.innerHTML='<i class="fa-solid fa-volume-high"></i>')}const o=e(".player"),a=e(".player-audio"),i=e(".player-volume-toggle"),s=e(".player-volume-toggle-btn");if(a&&a.dataset.src){const p=new Audio(a.dataset.src);i&&s&&(s.onclick=()=>{i.classList.toggle("is-active")});const y=e(".player-volume",a);y.addEventListener("change",(function(e){p.volume=e.currentTarget.value/100,i&&s&&n(e.currentTarget.value),localStorage.setItem("player_vol",p.volume)}),!1);var l=localStorage.getItem("player_vol");l&&(p.volume=l,y.value=100*l),i&&s&&n(y.value);var r=e(".player-toggle",a),c=null;function g(){p.load(),o.classList.toggle("is-playing"),p.play(),r.innerHTML='<svg class="i i-pause" viewBox="0 0 24 24"><path d="M5 4h4v16H5Zm10 0h4v16h-4Z"></path></svg>',null==c&&function(e){e.crossOrigin="anonymous";const t=new AudioContext,n=t.createMediaElementSource(e),o=t.createAnalyser();n.connect(o),n.connect(t.destination);const a=new Uint8Array(o.frequencyBinCount);o.getByteFrequencyData(a);const i=document.querySelector(".visualizer");for(let e=0;e<20;e++){const t=document.createElement("DIV");t.setAttribute("id","bar"+e),t.setAttribute("class","visualizer-item"),i.appendChild(t)}!function e(){o.getByteFrequencyData(a);for(let e=0;e<20;e++){const t=a[2*(e+10)],n=document.querySelector("#bar"+e);if(!n)continue;const o=Math.max(4,t||0);n.style.height=o+"px"}window.requestAnimationFrame(e)}()}(p),c="init visualizer"}function u(){o.classList.toggle("is-playing"),p.pause(),r.innerHTML='<svg class="i i-play" viewBox="0 0 24 24"><path d="m7 3 14 9-14 9z"></path></svg>'}"mediaSession"in navigator&&(navigator.mediaSession.setActionHandler("play",(function(){g()})),navigator.mediaSession.setActionHandler("pause",(function(){u()}))),r.addEventListener("click",(()=>{p.paused?g():u()}),!1)}!function n(){fetch("https://stream.radioani.me/api/nowplaying_static/japanisu.json").then((e=>e.json())).then((a=>{let i=a.song_history,s=(l="playerHistory",document.getElementById(l));var l;let r=e(".song-now",o),c=e(".song-next",o),g=a.now_playing.remaining,u=e(".player-poster");u&&u.src&&(u.crossOrigin="Anonymous",u.src="https://images.weserv.nl/?url="+encodeURIComponent(a.now_playing.song.art),Defer.js("https://cdn.jsdelivr.net/gh/lokesh/color-thief@2/dist/color-thief.umd.js","color-polyfill",0,(function(){!function(e,t){let n=new ColorThief;t.complete?e.setAttribute("style",`--accent: rgb(${n.getColor(t)})`):t.addEventListener("load",(function(){e.setAttribute("style",`--accent: rgb(${n.getColor(t)})`)}))}(document.body,u)}))),r&&t(r,a.now_playing.song),c&&t(c,a.playing_next.song),s&&(s.innerHTML=createHistory(i,s.dataset.results||5)),document.querySelectorAll(".player-meta").forEach((t=>{var n=e(".song-title",t),o=n.offsetWidth,a=t.offsetWidth;t.setAttribute("style","--title-width:"+a+"px"),o>a?n.classList.add("song-very-long"):n.classList.remove("song-very-long")})),"mediaSession"in navigator&&(navigator.mediaSession.metadata=new MediaMetadata({title:a.now_playing.song.title,artist:a.now_playing.song.artist,album:a.now_playing.song.album,artwork:[{src:a.now_playing.song.art,sizes:"96x96",type:"image/png"},{src:a.now_playing.song.art,sizes:"128x128",type:"image/png"},{src:a.now_playing.song.art,sizes:"192x192",type:"image/png"},{src:a.now_playing.song.art,sizes:"256x256",type:"image/png"}]})),setTimeout(n,1e3*g)})).catch((e=>console.log(e)))}()}();